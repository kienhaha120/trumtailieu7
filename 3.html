<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Trang Admin - TSA</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="top-bar">
    <span class="user-info">ğŸ‘‘ Admin: <span id="userEmail"></span></span>
    <button class="logout-btn" onclick="logout()">ÄÄƒng xuáº¥t</button>
  </div>

  <div style="padding: 30px; max-width: 800px; margin: auto;">
    <h2>â• Táº¡o tÃ i khoáº£n thÃ nh viÃªn</h2>
    <input type="email" id="newEmail" placeholder="Email thÃ nh viÃªn" style="width:100%; padding:10px; margin-top:10px;">
    <input type="password" id="newPassword" placeholder="Máº­t kháº©u" style="width:100%; padding:10px; margin-top:10px;">
    <button onclick="createUser()" style="margin-top: 10px; padding: 10px 20px;">Táº¡o tÃ i khoáº£n</button>

    <hr style="margin: 40px 0;">

    <h2>ğŸ“¤ Táº£i Ä‘á» thi lÃªn</h2>
    <input type="file" id="fileInput" style="margin-top: 10px;">
    <button onclick="uploadFile()" style="margin-top: 10px; padding: 10px 20px;">Táº£i lÃªn</button>

    <div id="fileList" style="margin-top: 20px;"></div>
  </div>

  <script>
    // Hiá»ƒn thá»‹ email admin
    document.getElementById("userEmail").innerText = localStorage.getItem("userEmail") || "admin";

    // Táº¡o tÃ i khoáº£n thÃ nh viÃªn
    function createUser() {
      const email = document.getElementById("newEmail").value.trim();
      const password = document.getElementById("newPassword").value.trim();
      if (!email || !password) return alert("Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ email vÃ  máº­t kháº©u!");

      let users = JSON.parse(localStorage.getItem("users") || "[]");
      if (users.find(u => u.email === email)) return alert("Email Ä‘Ã£ tá»“n táº¡i!");

      users.push({ email, password });
      localStorage.setItem("users", JSON.stringify(users));
      alert("ÄÃ£ táº¡o tÃ i khoáº£n thÃ nh viÃªn!");
      document.getElementById("newEmail").value = "";
      document.getElementById("newPassword").value = "";
    }

    // Upload file Ä‘á» thi
    function uploadFile() {
      const input = document.getElementById("fileInput");
      if (!input.files.length) return alert("Chá»n má»™t file Ä‘á»ƒ táº£i lÃªn.");

      const file = input.files[0];
      const reader = new FileReader();
      reader.onload = function(e) {
        const files = JSON.parse(localStorage.getItem("files") || "[]");
        files.push({ name: file.name, data: e.target.result });
        localStorage.setItem("files", JSON.stringify(files));
        renderFileList();
      }
      reader.readAsDataURL(file);
    }

    // Hiá»ƒn thá»‹ danh sÃ¡ch file Ä‘Ã£ upload
    function renderFileList() {
      const files = JSON.parse(localStorage.getItem("files") || "[]");
      let html = "<ul style='padding-left:20px;'>";
      files.forEach((f, i) => {
        html += `<li><a href="${f.data}" download="${f.name}">${f.name}</a></li>`;
      });
      html += "</ul>";
      document.getElementById("fileList").innerHTML = html;
    }

    // ÄÄƒng xuáº¥t
    function logout() {
      localStorage.clear();
      location.href = "index.html";
    }

    renderFileList();
  </script>
</body>
</html>
